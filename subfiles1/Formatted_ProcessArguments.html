<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<html>
<head><title>JabRef.java</title></head>
<body>
1  <function><specifier>public</specifier> <type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>ParserResult</name></argument>&gt;</argument_list></name></type> <name>processArguments</name><parameter_list>(<parameter><decl><type><name><name>String</name><index>[]</index></name></type> <name>args</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>initialStartup</name></decl></parameter>)</parameter_list> <block>{<br/>
2  <br/>
3  &nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>cli</name> <operator>=</operator> <operator>new</operator> <call><name>JabRefCLI</name><argument_list>(<argument><expr><name>args</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
4  <br/>
5  &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isShowVersion</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
6  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>cli</name><operator>.</operator><name>displayVersion</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
7  &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
8  <br/>
9  &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isHelp</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
10 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>cli</name><operator>.</operator><name>printUsage</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
11 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<return>return <expr><literal type="null">null</literal></expr>;</return> <comment type="line">// TODO replace with optional one day</comment><br/>
12 &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
13 <br/>
14 &nbsp;&nbsp;&nbsp;<comment type="line">// Check if we should reset all preferences to default values:</comment><br/>
15 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesReset</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
16 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>value</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesReset</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
17 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><literal type="string">"all"</literal><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>value</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><then> <block>{<br/>
18 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
19 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Setting all preferences to default values."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
20 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>clear</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
21 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>BackingStoreException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<br/>
22 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unable to clear preferences."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
23 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>e</name><operator>.</operator><name>printStackTrace</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
24 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
25 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
26 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>keys</name> <init>= <expr><call><name><name>value</name><operator>.</operator><name>split</name></name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
27 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>key</name> <range>: <expr><name>keys</name></expr></range></decl></init>)</control> <block>{<br/>
28 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>hasKey</name></name><argument_list>(<argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><then> <block>{<br/>
29 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Resetting preference key '%0'"</literal></expr></argument>, <argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>clear</name></name><argument_list>(<argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
31 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
32 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown preference key '%0'"</literal></expr></argument>, <argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
33 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
34 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></for><br/>
35 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
36 <br/>
37 &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
38 <br/>
39 &nbsp;&nbsp;&nbsp;<comment type="line">// Check if we should import preferences from a file:</comment><br/>
40 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
41 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
42 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>importPreferences</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesImport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
43 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>CustomEntryTypesManager</name><operator>.</operator><name>loadCustomEntryTypes</name></name><argument_list>(<argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
44 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>ExportFormats</name><operator>.</operator><name>initAllExports</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
45 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>JabRefException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
46 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Cannot import preferences"</literal></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
47 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
48 &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
49 <br/>
50 &nbsp;&nbsp;&nbsp;<comment type="line">// Vector to put imported/loaded database(s) in.</comment><br/>
51 &nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>ParserResult</name></argument>&gt;</argument_list></name></type> <name>loaded</name> <init>= <expr><operator>new</operator> <call><name><name>Vector</name><argument_list type="generic">&lt;&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
52 &nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></type> <name>toImport</name> <init>= <expr><operator>new</operator> <call><name><name>Vector</name><argument_list type="generic">&lt;&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
53 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <operator>(</operator><call><name><name>cli</name><operator>.</operator><name>getLeftOver</name></name><argument_list>()</argument_list></call><operator>.</operator><name>length</name> <operator>&gt;</operator> <literal type="number">0</literal><operator>)</operator></expr>)</condition><then> <block>{<br/>
54 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>aLeftOver</name> <range>: <expr><call><name><name>cli</name><operator>.</operator><name>getLeftOver</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<br/>
55 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Leftover arguments that have a "bib" extension are interpreted as</comment><br/>
56 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// bib files to open. Other files, and files that could not be opened</comment><br/>
57 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// as bib, we try to import instead.</comment><br/>
58 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>bibExtension</name> <init>= <expr><call><name><name>aLeftOver</name><operator>.</operator><name>toLowerCase</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>endsWith</name><argument_list>(<argument><expr><literal type="string">"bib"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
59 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt><br/>
60 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>bibExtension</name></expr>)</condition><then> <block>{<br/>
61 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>pr</name> <operator>=</operator> <call><name><name>JabRef</name><operator>.</operator><name>openBibFile</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
62 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
63 <br/>
64 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>(</operator><name>pr</name> <operator>==</operator> <literal type="null">null</literal><operator>)</operator> <operator>||</operator> <operator>(</operator><name>pr</name> <operator>==</operator> <name><name>ParserResult</name><operator>.</operator><name>INVALID_FORMAT</name></name><operator>)</operator></expr>)</condition><then> <block>{<br/>
65 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We will try to import this file. Normally we</comment><br/>
66 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// will import it into a new tab, but if this import has</comment><br/>
67 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// been initiated by another instance through the remote</comment><br/>
68 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// listener, we will instead import it into the current database.</comment><br/>
69 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This will enable easy integration with web browsers that can</comment><br/>
70 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// open a reference file in JabRef.</comment><br/>
71 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name></expr>)</condition><then> <block>{<br/>
72 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>toImport</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
73 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
74 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importToOpenBase</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
75 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
76 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
77 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
78 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name><name>ParserResult</name><operator>.</operator><name>INVALID_FORMAT</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
79 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
80 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
81 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <elseif>else <if>if <condition>(<expr><name>pr</name> <operator>!=</operator> <name><name>ParserResult</name><operator>.</operator><name>FILE_LOCKED</name></name></expr>)</condition><then> <block>{<br/>
82 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>pr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
83 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if></elseif></if><br/>
84 <br/>
85 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></for><br/>
86 &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
87 <br/>
88 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isFileImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
89 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>toImport</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getFileImport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
90 &nbsp;&nbsp;&nbsp;}</block></then></if><br/>
91 <br/>
92 &nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>filenameString</name> <range>: <expr><name>toImport</name></expr></range></decl></init>)</control> <block>{<br/>
93 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importFile</name></name><argument_list>(<argument><expr><name>filenameString</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
94 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>pr</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
95 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>pr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
96 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
97 &nbsp;&nbsp;&nbsp;}</block></for><br/>
98 <br/>
99 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isImportToOpenBase</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importToOpenBase</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getImportToOpenBase</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
103&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
104&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
105<br/>
106&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isFetcherEngine</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
107&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name>fetch</name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getFetcherEngine</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
111&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
112<br/>
113&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isExportMatches</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getExportMatches</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>searchTerm</name> <init>= <expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name><operator>.</operator><call><name>replace</name><argument_list>(<argument><expr><literal type="string">"\\$"</literal></expr></argument>, <argument><expr><literal type="string">" "</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line">//enables blanks within the search term:</comment><br/>
117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <comment type="line">//? stands for a blank</comment><br/>
118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>dataBase</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SearchManagerNoGUI</name></type> <name>smng</name> <init>= <expr><operator>new</operator> <call><name>SearchManagerNoGUI</name><argument_list>(<argument><expr><name>searchTerm</name></expr></argument>, <argument><expr><name>dataBase</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>newBase</name> <init>= <expr><call><name><name>smng</name><operator>.</operator><name>getDBfromMatches</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line">//newBase contains only match entries</comment><br/>
122<br/>
123&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//export database</comment><br/>
124&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>(</operator><name>newBase</name> <operator>!=</operator> <literal type="null">null</literal><operator>)</operator> <operator>&amp;&amp;</operator> <operator>(</operator><call><name><name>newBase</name><operator>.</operator><name>getEntryCount</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal><operator>)</operator></expr>)</condition><then> <block>{<br/>
125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>formatName</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt><br/>
126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>IExportFormat</name></type> <name>format</name></decl>;</decl_stmt><br/>
127<br/>
128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//read in the export format, take default format if no format entered</comment><br/>
129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<switch>switch <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name></expr>)</condition> <block>{<br/>
130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<case>case <expr><literal type="number">3</literal></expr>:</case><br/>
131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>formatName</name> <operator>=</operator> <name><name>data</name><index>[<expr><literal type="number">2</literal></expr>]</index></name></expr>;</expr_stmt><br/>
132&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<break>break;</break><br/>
133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<case>case <expr><literal type="number">2</literal></expr>:</case><br/>
134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//default ExportFormat: HTML table (with Abstract &amp; BibTeX)</comment><br/>
135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>formatName</name> <operator>=</operator> <literal type="string">"tablerefsabsbib"</literal></expr>;</expr_stmt><br/>
136&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<break>break;</break><br/>
137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<default>default:</default><br/>
138&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<br/>
139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Output file missing"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">". \n \t "</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">"Usage"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">": "</literal></expr></argument>)</argument_list></call><br/>
140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>JabRefCLI</name><operator>.</operator><name>getExportMatchesSyntax</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<return>return <expr><literal type="null">null</literal></expr>;</return> <comment type="line">// TODO replace with optional one day</comment><br/>
142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></switch> <comment type="line">//end switch</comment><br/>
143<br/>
144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//export new database</comment><br/>
145&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>format</name> <operator>=</operator> <call><name><name>ExportFormats</name><operator>.</operator><name>getExportFormat</name></name><argument_list>(<argument><expr><name>formatName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>format</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We have an ExportFormat instance:</comment><br/>
148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Exporting"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>format</name><operator>.</operator><name>performExport</name></name><argument_list>(<argument><expr><name>newBase</name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not export file"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" '"</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name> <operator>+</operator> <literal type="string">"': "</literal><br/>
153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
154&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown export format"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name>formatName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <comment type="block">/*end if newBase != null*/</comment><else>else <block>{<br/>
159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"No search matches."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid input option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if> <comment type="line">//end if(loaded.size &gt; 0)</comment><br/>
164&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
165<br/>
166&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isFileExport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
168&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getFileExport</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
169<br/>
170&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">1</literal></expr>)</condition><then> <block>{<br/>
171&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This signals that the latest import should be stored in BibTeX</comment><br/>
172&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// format to the given file.</comment><br/>
173&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
174&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
175&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>pr</name><operator>.</operator><name>isInvalid</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
176&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
177&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Saving"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
178&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SaveSession</name></type> <name>session</name> <init>= <expr><call><name><name>FileActions</name><operator>.</operator><name>saveDatabase</name></name><argument_list>(<argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>,<br/>
179&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>,<br/>
180&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JabRefPreferences</name><operator>.</operator><name>DEFAULT_ENCODING</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Show just a warning message if encoding didn't work for all characters:</comment><br/>
182&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>couldEncodeAll</name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Warning"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal><br/>
184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<br/>
185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><literal type="string">"The chosen encoding '%0' could not encode the following characters: "</literal></expr></argument>,<br/>
186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>session</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><br/>
187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getProblemCharacters</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>session</name><operator>.</operator><name>commit</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>SaveException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not save file."</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">"\n"</literal><br/>
192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getLocalizedMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid import option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
198&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <elseif>else <if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">2</literal></expr>)</condition><then> <block>{<br/>
199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This signals that the latest import should be stored in the given</comment><br/>
200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// format to the given file.</comment><br/>
201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
202<br/>
203&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Set the global variable for this database's file directory before exporting,</comment><br/>
204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// so formatters can resolve linked files correctly.</comment><br/>
205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// (This is an ugly hack!)</comment><br/>
206&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>File</name></type> <name>theFile</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getFile</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>theFile</name><operator>.</operator><name>isAbsolute</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>theFile</name> <operator>=</operator> <call><name><name>theFile</name><operator>.</operator><name>getAbsoluteFile</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
209&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>MetaData</name></type> <name>metaData</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
211&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>metaData</name><operator>.</operator><name>setFile</name></name><argument_list>(<argument><expr><name>theFile</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>fileDirForDatabase</name></name> <operator>=</operator> <call><name><name>metaData</name><operator>.</operator><name>getFileDirectory</name></name><argument_list>(<argument><expr><name><name>Globals</name><operator>.</operator><name>FILE_FIELD</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
213&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>databaseFile</name></name> <operator>=</operator> <call><name><name>metaData</name><operator>.</operator><name>getFile</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Exporting"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>IExportFormat</name></type> <name>format</name> <init>= <expr><call><name><name>ExportFormats</name><operator>.</operator><name>getExportFormat</name></name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
216&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>format</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We have an ExportFormat instance:</comment><br/>
218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>format</name><operator>.</operator><name>performExport</name></name><argument_list>(<argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not export file"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" '"</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name> <operator>+</operator> <literal type="string">"': "</literal><br/>
222&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
225&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown export format"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
226&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
227<br/>
228&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if></elseif></if><br/>
229&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
230&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid import option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
231&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
232&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
233<br/>
234&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Finished export"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
235<br/>
236&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesExport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
237&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
238&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>exportPreferences</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesExport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
239&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>JabRefException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
240&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Cannot export preferences"</literal></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
241&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
242&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
243<br/>
244&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isAuxImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
245&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>usageMsg</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt><br/>
246<br/>
247&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <comment type="line">// bibtex file loaded</comment><br/>
248&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<block>{<br/>
249&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getAuxImport</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
250<br/>
251&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">2</literal></expr>)</condition><then> <block>{<br/>
252&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>firstElement</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
253&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>AuxCommandLine</name></type> <name>acl</name> <init>= <expr><operator>new</operator> <call><name>AuxCommandLine</name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>newBase</name> <init>= <expr><call><name><name>acl</name><operator>.</operator><name>perform</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/>
255<br/>
256&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>notSavedMsg</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt><br/>
257<br/>
258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// write an output, if something could be resolved</comment><br/>
259&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
260&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>newBase</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/>
261&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>newBase</name><operator>.</operator><name>getEntryCount</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition><then> <block>{<br/>
262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>subName</name> <init>= <expr><call><name><name>StringUtil</name><operator>.</operator><name>getCorrectFileName</name></name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>, <argument><expr><literal type="string">"bib"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
263<br/>
264&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/>
265&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Saving"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name>subName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
266&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SaveSession</name></type> <name>session</name> <init>= <expr><call><name><name>FileActions</name><operator>.</operator><name>saveDatabase</name></name><argument_list>(<argument><expr><name>newBase</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>MetaData</name><argument_list>()</argument_list></call></expr></argument>, <comment type="line">// no Metadata</comment><br/>
267&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><name>subName</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>,<br/>
268&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JabRefPreferences</name><operator>.</operator><name>DEFAULT_ENCODING</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/>
269&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Show just a warning message if encoding didn't work for all characters:</comment><br/>
270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>couldEncodeAll</name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/>
271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Warning"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal><br/>
272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<br/>
273&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><literal type="string">"The chosen encoding '%0' could not encode the following characters: "</literal></expr></argument>,<br/>
274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>session</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><br/>
275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getProblemCharacters</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
276&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>session</name><operator>.</operator><name>commit</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/>
278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>SaveException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/>
279&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not save file."</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">"\n"</literal><br/>
280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getLocalizedMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
281&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/>
282<br/>
283&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>notSavedMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/>
284&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
285&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
286<br/>
287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><name>notSavedMsg</name></expr>)</condition><then> <block>{<br/>
288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"no database generated"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
291&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>usageMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/>
292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/>
294&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>usageMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/>
295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/>
296<br/>
297&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>usageMsg</name></expr>)</condition><then> <block>{<br/>
298&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"no base-BibTeX-file specified"</literal></expr></argument>)</argument_list></call><operator>+</operator><literal type="string">"!"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
299&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"usage"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" :"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><literal type="string">"jabref --aux infile[.aux],outfile[.bib] base-BibTeX-file"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/>
301&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
302&nbsp;&nbsp;&nbsp;}</block></then></if><br/>
303<br/>
304&nbsp;&nbsp;&nbsp;<return>return <expr><name>loaded</name></expr>;</return><br/>
305}</block></function><br/>
</body>
</html>
