<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>JabRef.java</title></head>
<body>
<line class = "methodSg"  >1  <function><specifier>public</specifier> <type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>ParserResult</name></argument>&gt;</argument_list></name></type> <name>processArguments</name><parameter_list>(<parameter><decl><type><name><name>String</name><index>[]</index></name></type> <name>args</name></decl></parameter>, <parameter><decl><type><name>boolean</name></type> <name>initialStartup</name></decl></parameter>)</parameter_list> <block>{<br/></block></function></line>
<line class = "Asignmt"  >2  <br/></line>
<line class = "nothing"  >3  &nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>cli</name> <operator>=</operator> <operator>new</operator> <call><name>JabRefCLI</name><argument_list>(<argument><expr><name>args</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >4  <br/></line>
<line class = "controlS" >5  &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isShowVersion</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt"  >6  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>cli</name><operator>.</operator><name>displayVersion</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >7  &nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >8  <br/></line>
<line class ="controlS"  >9  &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isHelp</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class ="print"     >10 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>cli</name><operator>.</operator><name>printUsage</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "return"   >11 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<return>return <expr><literal type="null">null</literal></expr>;</return> <comment type="line">// TODO replace with optional one day</comment><br/></line>
<line class = "nothing"  >12 &nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >13 <br/></line>
<line class = "nothing"  >14 &nbsp;&nbsp;&nbsp;<comment type="line">// Check if we should reset all preferences to default values:</comment><br/></line>
<line class = "controlS" >15 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesReset</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "Asignmt"  >16 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>value</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesReset</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS" >17 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><literal type="string">"all"</literal><operator>.</operator><call><name>equals</name><argument_list>(<argument><expr><call><name><name>value</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "try"      >18 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></block></try></line>
<line class = "print"    >19 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Setting all preferences to default values."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC"  >20 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>clear</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "catch"    >21 <block>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>BackingStoreException</name></type> <name>e</name></decl></parameter>)</parameter_list> <block>{<br/></block></catch></line>
<line class = "printE"   >22 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unable to clear preferences."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC"  >23 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>e</name><operator>.</operator><name>printStackTrace</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >24 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<line class = "controlS" >25 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></block></else></line>
<line class = "declaration">26 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>keys</name> <init>= <expr><call><name><name>value</name><operator>.</operator><name>split</name></name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "for"     >27 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>key</name> <range>: <expr><name>keys</name></expr></range></decl></init>)</control> <block>{<br/></block></for></line>
<line class = "controlS">28 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>hasKey</name></name><argument_list>(<argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "print">29 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Resetting preference key '%0'"</literal></expr></argument>, <argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC">30 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>clear</name></name><argument_list>(<argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "contorlS">31 <then><block>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "print">32 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown preference key '%0'"</literal></expr></argument>, <argument><expr><call><name><name>key</name><operator>.</operator><name>trim</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >33 <if><else><block>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >34 <for><block>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></for><br/></line>
<line class = "nothing"  >35 <if>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >36 <br/></line>
<line class = "nothing"  >37 &nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >38 <br/></line>
<line class = "nothing"  >39 &nbsp;&nbsp;&nbsp;<comment type="line">// Check if we should import preferences from a file:</comment><br/></line>
<line class = "controlS">40 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "try">41 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></block></try></line>
<line class = "methodC">42 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>importPreferences</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesImport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC">43 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>CustomEntryTypesManager</name><operator>.</operator><name>loadCustomEntryTypes</name></name><argument_list>(<argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC">44 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>ExportFormats</name><operator>.</operator><name>initAllExports</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "catch">45 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>JabRefException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></line>
<line class = "printE">46 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Cannot import preferences"</literal></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >47 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try><catch><block>}</block></catch></try><br/></line>
<line class = "nothing"  >48 &nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >49 <br/></line>
<line class = "nothing"  >50 &nbsp;&nbsp;&nbsp;<comment type="line">// Vector to put imported/loaded database(s) in.</comment><br/></line>
<line class = "decl">51 &nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>ParserResult</name></argument>&gt;</argument_list></name></type> <name>loaded</name> <init>= <expr><operator>new</operator> <call><name><name>Vector</name><argument_list type="generic">&lt;&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">52 &nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>Vector</name><argument_list type="generic">&lt;<argument><name>String</name></argument>&gt;</argument_list></name></type> <name>toImport</name> <init>= <expr><operator>new</operator> <call><name><name>Vector</name><argument_list type="generic">&lt;&gt;</argument_list></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">53 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <operator>(</operator><call><name><name>cli</name><operator>.</operator><name>getLeftOver</name></name><argument_list>()</argument_list></call><operator>.</operator><name>length</name> <operator>&gt;</operator> <literal type="number">0</literal><operator>)</operator></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "for" >54 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>aLeftOver</name> <range>: <expr><call><name><name>cli</name><operator>.</operator><name>getLeftOver</name></name><argument_list>()</argument_list></call></expr></range></decl></init>)</control> <block>{<br/></block></for></line></line>
<line class = "nothing"  >55 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Leftover arguments that have a "bib" extension are interpreted as</comment><br/></line>
<line class = "nothing"  >56 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// bib files to open. Other files, and files that could not be opened</comment><br/></line>
<line class = "nothing"  >57 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// as bib, we try to import instead.</comment><br/></line>
<line class = "decl">58 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>bibExtension</name> <init>= <expr><call><name><name>aLeftOver</name><operator>.</operator><name>toLowerCase</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>endsWith</name><argument_list>(<argument><expr><literal type="string">"bib"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">59 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >60 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>bibExtension</name></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt">61 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>pr</name> <operator>=</operator> <call><name><name>JabRef</name><operator>.</operator><name>openBibFile</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >62 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >63 <br/></line>
<line class = "controlS">64 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>(</operator><name>pr</name> <operator>==</operator> <literal type="null">null</literal><operator>)</operator> <operator>||</operator> <operator>(</operator><name>pr</name> <operator>==</operator> <name><name>ParserResult</name><operator>.</operator><name>INVALID_FORMAT</name></name><operator>)</operator></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "nothing"  >65 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We will try to import this file. Normally we</comment><br/></line>
<line class = "nothing"  >66 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// will import it into a new tab, but if this import has</comment><br/></line>
<line class = "nothing"  >67 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// been initiated by another instance through the remote</comment><br/></line>
<line class = "nothing"  >68 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// listener, we will instead import it into the current database.</comment><br/></line>
<line class = "nothing"  >69 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This will enable easy integration with web browsers that can</comment><br/></line>
<line class = "nothing"  >70 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// open a reference file in JabRef.</comment><br/></line>
<line class = "controlS">71 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>initialStartup</name></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt">72 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>toImport</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "controlS">73 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<then><block>}</block></then> <else>else <block>{<br/></block></else></line>
<line class = "Asignmt">74 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importToOpenBase</name></name><argument_list>(<argument><expr><name>aLeftOver</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">75 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt">76 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "controlS">77 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<then><block>}</block></then> <else>else <block>{<br/></block></else></line>
<line class = "controlS">78 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name><name>ParserResult</name><operator>.</operator><name>INVALID_FORMAT</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >79 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >80 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><else><block>}</block></else></if><br/></line>
<line class = "controlS">81 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <elseif>else <if>if <condition>(<expr><name>pr</name> <operator>!=</operator> <name><name>ParserResult</name><operator>.</operator><name>FILE_LOCKED</name></name></expr>)</condition><then> <block>{<br/></block></then></if></elseif></line>
<line class = "methodC">82 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>pr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >83 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><elseif><if><then><block>}</block></then></if></elseif></if><br/></line>
<line class = "nothing"  >84 <br/></line>
<line class = "nothing"  >85 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<for><block>}</block></for><br/></line>
<line class = "nothing"  >86 &nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >87 <br/></line>
<line class = "controlS">88 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isFileImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "methodC">89 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>toImport</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getFileImport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >90 &nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >91 <br/></line>
<line class = "for">92 &nbsp;&nbsp;&nbsp;<for>for <control>(<init><decl><type><name>String</name></type> <name>filenameString</name> <range>: <expr><name>toImport</name></expr></range></decl></init>)</control> <block>{<br/></block></for></line>
<line class = "Asignmt">93 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importFile</name></name><argument_list>(<argument><expr><name>filenameString</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">94 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>pr</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "methodC">95 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>pr</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >96 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >97 &nbsp;&nbsp;&nbsp;<for><block>}</block></for><br/></line>
<line class = "nothing"  >98 <br/></line>
<line class = "controlS">99 &nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isImportToOpenBase</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt">100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name><name>JabRef</name><operator>.</operator><name>importToOpenBase</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getImportToOpenBase</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">101&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "Asignmt">102&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >103&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >104&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >105<br/></line>
<line class = "controlS">106&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isFetcherEngine</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "decl">107&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>res</name> <init>= <expr><call><name>fetch</name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getFetcherEngine</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>res</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "nothing"  >109&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>loaded</name><operator>.</operator><name>add</name></name><argument_list>(<argument><expr><name>res</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >110&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >111&nbsp;&nbsp;&nbsp;<if><then><block>}</block></then></if><br/></line>
<line class = "nothing"  >112<br/></line>
<line class = "controlS">113&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isExportMatches</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "controlS">114&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></block></then></if></line>
<line class = "decls ">115&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getExportMatches</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">116&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>searchTerm</name> <init>= <expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name><operator>.</operator><call><name>replace</name><argument_list>(<argument><expr><literal type="string">"\\$"</literal></expr></argument>, <argument><expr><literal type="string">" "</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line">//enables blanks within the search term:</comment><br/></line>
<line class = "nothing"  >117&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <comment type="line">//? stands for a blank</comment><br/></line>
<line class = "decls">118&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">119&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>dataBase</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">120&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SearchManagerNoGUI</name></type> <name>smng</name> <init>= <expr><operator>new</operator> <call><name>SearchManagerNoGUI</name><argument_list>(<argument><expr><name>searchTerm</name></expr></argument>, <argument><expr><name>dataBase</name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">121&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>newBase</name> <init>= <expr><call><name><name>smng</name><operator>.</operator><name>getDBfromMatches</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt> <comment type="line">//newBase contains only match entries</comment><br/></line>
<line class = "nothing"  >122<br/></line>
<line class = "nothing"  >123&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//export database</comment><br/></line>
<line class = "controlS">124&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>(</operator><name>newBase</name> <operator>!=</operator> <literal type="null">null</literal><operator>)</operator> <operator>&amp;&amp;</operator> <operator>(</operator><call><name><name>newBase</name><operator>.</operator><name>getEntryCount</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal><operator>)</operator></expr>)</condition><then> <block>{<br/></line>
<line class = "decl">125&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>formatName</name> <init>= <expr><literal type="null">null</literal></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">126&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>IExportFormat</name></type> <name>format</name></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >127<br/></line>
<line class = "nothing"  >128&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//read in the export format, take default format if no format entered</comment><br/></line>
<line class = "controlS">129&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<switch>switch <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name></expr>)</condition> <block>{<br/></line>
<line class = "nothing"  >130&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<case>case <expr><literal type="number">3</literal></expr>:</case><br/></line>
<line class = "Asignmt">131&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>formatName</name> <operator>=</operator> <name><name>data</name><index>[<expr><literal type="number">2</literal></expr>]</index></name></expr>;</expr_stmt><br/></line>
<line class = "break">132&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<break>break;</break><br/></line>
<line class = "nothing"  >133&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<case>case <expr><literal type="number">2</literal></expr>:</case><br/></line>
<line class = "nothing"  >134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//default ExportFormat: HTML table (with Abstract &amp; BibTeX)</comment><br/></line>
<line class = "Asignmt">135&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>formatName</name> <operator>=</operator> <literal type="string">"tablerefsabsbib"</literal></expr>;</expr_stmt><br/></line>
<line class = "break">136&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<break>break;</break><br/></line>
<line class = "controlS">137&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<default>default:</default><br/></line>
<line class = "printE">138&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<br/></argument_list></call></expr></expr_stmt></line>
<line class = "methodC">139&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Output file missing"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">". \n \t "</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">"Usage"</literal></expr></argument>)</argument_list></call><operator>.</operator><call><name>concat</name><argument_list>(<argument><expr><literal type="string">": "</literal></expr></argument>)</argument_list></call><br/></line>
<line class = "methodC">140&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><argument_list><argument><expr><operator>+</operator> <call><name><name>JabRefCLI</name><operator>.</operator><name>getExportMatchesSyntax</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "return">141&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<return>return <expr><literal type="null">null</literal></expr>;</return> <comment type="line">// TODO replace with optional one day</comment><br/></line>
<line class = "nothing"  >142&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<switch><block>}</block></switch> <comment type="line">//end switch</comment><br/></line>
<line class = "nothing"  >143<br/></line>
<line class = "nothing"  >144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">//export new database</comment><br/></line>
<line class = "Asignmt">145&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>format</name> <operator>=</operator> <call><name><name>ExportFormats</name><operator>.</operator><name>getExportFormat</name></name><argument_list>(<argument><expr><name>formatName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "controlS">146&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>format</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "nothing"  >147&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We have an ExportFormat instance:</comment><br/></line>
<line class = "try">148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></block></try></line>
<line class = "print">149&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Exporting"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >150&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>format</name><operator>.</operator><name>performExport</name></name><argument_list>(<argument><expr><name>newBase</name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "methodC">151&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<block>}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></block></catch></line>
<line class = "printE">152&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not export file"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" '"</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name> <operator>+</operator> <literal type="string">"': "</literal><br/></expr></argument></argument_list></call></expr></expr_stmt></line>
<line class = "methodC">153&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >154&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<line class = "controlS">155&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "printE">156&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown export format"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name>formatName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >157&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "controlS">158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <comment type="block">/*end if newBase != null*/</comment><else>else <block>{<br/></line>
<line class = "print">159&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"No search matches."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if><else><block>}</block></else></if><br/></line>
<line class = "controlS">161&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<then><block>}</block></then> <else>else <block>{<br/></block></else></line>
<line class = "print">162&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid input option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >163&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if> <comment type="line">//end if(loaded.size &gt; 0)</comment><br/></line>
<line class = "nothing"  >164&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >165<br/></line>
<line class = "controlS">166&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isFileExport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "controlS">167&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "decl">168&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getFileExport</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >169<br/></line>
<line class = "controlS">170&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">1</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "nothing"  >171&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This signals that the latest import should be stored in BibTeX</comment><br/></line>
<line class = "nothing"  >172&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// format to the given file.</comment><br/></line>
<line class = "controlS">173&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "Asignmt">174&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">175&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>pr</name><operator>.</operator><name>isInvalid</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "try">176&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></line>
<line class = "print">177&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Saving"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "decl">178&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SaveSession</name></type> <name>session</name> <init>= <expr><call><name><name>FileActions</name><operator>.</operator><name>saveDatabase</name></name><argument_list>(<argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>,<br/></line>
<line class = "decl">179&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>,<br/></line>
<line class = "methodC">180&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JabRefPreferences</name><operator>.</operator><name>DEFAULT_ENCODING</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >181&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Show just a warning message if encoding didn't work for all characters:</comment><br/></line>
<line class = "controlS">182&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>couldEncodeAll</name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "printE">183&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Warning"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal><br/></line>
<line class = "printE">184&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<br/></line>
<line class = "nothing"  >185&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><literal type="string">"The chosen encoding '%0' could not encode the following characters: "</literal></expr></argument>,<br/></line>
<line class = "methodC">186&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>session</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><br/></line>
<line class = "methodC">187&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getProblemCharacters</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >188&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "methodC">189&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>session</name><operator>.</operator><name>commit</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<lineclass = "catch">190&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>SaveException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></line>
<line class = "printE">191&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not save file."</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">"\n"</literal><br/></line>
<lineclass = "printE">192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getLocalizedMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >193&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<line class = "nothing"  >194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "controlS">195&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "printE">196&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid import option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >197&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<lineclass = "controlS">198&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <elseif>else <if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">2</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "nothing"  >199&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// This signals that the latest import should be stored in the given</comment><br/></line>
<line class = "nothing"  >200&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// format to the given file.</comment><br/></line>
<line class = "decl">201&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>elementAt</name></name><argument_list>(<argument><expr><call><name><name>loaded</name><operator>.</operator><name>size</name></name><argument_list>()</argument_list></call> <operator>-</operator> <literal type="number">1</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >202<br/></line>
<line class = "nothing"  >203&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Set the global variable for this database's file directory before exporting,</comment><br/></line>
<line class = "nothing"  >204&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// so formatters can resolve linked files correctly.</comment><br/></line>
<line class = "nothing"  >205&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// (This is an ugly hack!)</comment><br/></line>
<line class = "decl">206&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>File</name></type> <name>theFile</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getFile</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">207&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>theFile</name><operator>.</operator><name>isAbsolute</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "Asignmt">208&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>theFile</name> <operator>=</operator> <call><name><name>theFile</name><operator>.</operator><name>getAbsoluteFile</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >209&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "decl">210&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>MetaData</name></type> <name>metaData</name> <init>= <expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "Asignmt">211&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>metaData</name><operator>.</operator><name>setFile</name></name><argument_list>(<argument><expr><name>theFile</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<lineclass = "Asignmt">212&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>fileDirForDatabase</name></name> <operator>=</operator> <call><name><name>metaData</name><operator>.</operator><name>getFileDirectory</name></name><argument_list>(<argument><expr><name><name>Globals</name><operator>.</operator><name>FILE_FIELD</name></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<lineclass = "Asignmt">213&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>databaseFile</name></name> <operator>=</operator> <call><name><name>metaData</name><operator>.</operator><name>getFile</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "print">214&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Exporting"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "decl">215&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>IExportFormat</name></type> <name>format</name> <init>= <expr><call><name><name>ExportFormats</name><operator>.</operator><name>getExportFormat</name></name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "controlS">216&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>format</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "nothing"  >217&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// We have an ExportFormat instance:</comment><br/></line>
<lineclass = "try">218&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></line>
<line class = "methodC">219&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>format</name><operator>.</operator><name>performExport</name></name><argument_list>(<argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getMetaData</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>, <argument><expr><literal type="null">null</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "catch">220&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>Exception</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></line>
<lineclass = "">221&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not export file"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" '"</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name> <operator>+</operator> <literal type="string">"': "</literal><br/></line>
<lineclass = "methodC">222&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >223&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<lineclass = "controlS">224&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<lineclass = "printE">225&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Unknown export format"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >226&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >227<br/></line>
<line class = "nothing"  >228&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if></elseif></if><br/></line>
<line class = "controlS">229&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "printE">230&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"The output option depends on a valid import option."</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >231&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >232&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >233<br/></line>
<line class = "printE">234&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>debug</name></name><argument_list>(<argument><expr><literal type="string">"Finished export"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >235<br/></line>
<line class = "controlS">236&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>cli</name><operator>.</operator><name>isPreferencesExport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "try">237&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></line>
<line class = "methodC">238&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>exportPreferences</name></name><argument_list>(<argument><expr><call><name><name>cli</name><operator>.</operator><name>getPreferencesExport</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "catch">239&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>JabRefException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></line>
<line class = "printE">240&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>LOGGER</name><operator>.</operator><name>error</name></name><argument_list>(<argument><expr><literal type="string">"Cannot export preferences"</literal></expr></argument>, <argument><expr><name>ex</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >241&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<line class = "nothing"  >242&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >243<br/></line>
<line class = "controlS">244&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>cli</name><operator>.</operator><name>isBlank</name></name><argument_list>()</argument_list></call> <operator>&amp;&amp;</operator> <call><name><name>cli</name><operator>.</operator><name>isAuxImport</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "decl">245&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>usageMsg</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >246<br/></line>
<line class = "controlS">247&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>loaded</name><operator>.</operator><name>isEmpty</name></name><argument_list>()</argument_list></call></expr>)</condition><then> <comment type="line">// bibtex file loaded</comment><br/></line>
<line class = "nothing"  >248&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<block>{<br/></line>
<line class = "decl">249&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name><name>String</name><index>[]</index></name></type> <name>data</name> <init>= <expr><call><name><name>cli</name><operator>.</operator><name>getAuxImport</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>split</name><argument_list>(<argument><expr><literal type="string">","</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >250<br/></line>
<line class = "controlS">251&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name><name>data</name><operator>.</operator><name>length</name></name> <operator>==</operator> <literal type="number">2</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "decl">252&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>ParserResult</name></type> <name>pr</name> <init>= <expr><call><name><name>loaded</name><operator>.</operator><name>firstElement</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">253&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>AuxCommandLine</name></type> <name>acl</name> <init>= <expr><operator>new</operator> <call><name>AuxCommandLine</name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">0</literal></expr>]</index></name></expr></argument>, <argument><expr><call><name><name>pr</name><operator>.</operator><name>getDatabase</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "decl">254&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>BibtexDatabase</name></type> <name>newBase</name> <init>= <expr><call><name><name>acl</name><operator>.</operator><name>perform</name></name><argument_list>()</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >255<br/></line>
<line class = "decl">256&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>boolean</name></type> <name>notSavedMsg</name> <init>= <expr><literal type="boolean">false</literal></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >257<br/></line>
<line class = "nothing"  >258&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// write an output, if something could be resolved</comment><br/></line>
<line class = "nothing"  >259&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/></line>
<line class = "controlS">260&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>newBase</name> <operator>!=</operator> <literal type="null">null</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "controlS">261&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><call><name><name>newBase</name><operator>.</operator><name>getEntryCount</name></name><argument_list>()</argument_list></call> <operator>&gt;</operator> <literal type="number">0</literal></expr>)</condition><then> <block>{<br/></line>
<line class = "decl">262&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>String</name></type> <name>subName</name> <init>= <expr><call><name><name>StringUtil</name><operator>.</operator><name>getCorrectFileName</name></name><argument_list>(<argument><expr><name><name>data</name><index>[<expr><literal type="number">1</literal></expr>]</index></name></expr></argument>, <argument><expr><literal type="string">"bib"</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >263<br/></line>
<line class = "try">264&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<try>try <block>{<br/></line>
<line class = "print">265&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Saving"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal> <operator>+</operator> <name>subName</name></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "decl">266&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<decl_stmt><decl><type><name>SaveSession</name></type> <name>session</name> <init>= <expr><call><name><name>FileActions</name><operator>.</operator><name>saveDatabase</name></name><argument_list>(<argument><expr><name>newBase</name></expr></argument>, <argument><expr><operator>new</operator> <call><name>MetaData</name><argument_list>()</argument_list></call></expr></argument>, <comment type="line">// no Metadata</comment><br/></line>
<line class = "methodArgs">267&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><operator>new</operator> <call><name>File</name><argument_list>(<argument><expr><name>subName</name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><name><name>Globals</name><operator>.</operator><name>prefs</name></name></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>,<br/></line>
<line class = "methodArgs">268&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>Globals</name><operator>.</operator><name>prefs</name><operator>.</operator><name>get</name></name><argument_list>(<argument><expr><name><name>JabRefPreferences</name><operator>.</operator><name>DEFAULT_ENCODING</name></name></expr></argument>)</argument_list></call></expr></argument>, <argument><expr><literal type="boolean">false</literal></expr></argument>)</argument_list></call></expr></init></decl>;</decl_stmt><br/></line>
<line class = "nothing"  >269&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<comment type="line">// Show just a warning message if encoding didn't work for all characters:</comment><br/></line>
<line class = "controlS">270&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>couldEncodeAll</name><argument_list>()</argument_list></call></expr>)</condition><then> <block>{<br/></line>
<line class = "printE">271&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Warning"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">": "</literal><br/></line>
<line class = "print">272&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<br/></line>
<line class = "nothing"  >273&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><literal type="string">"The chosen encoding '%0' could not encode the following characters: "</literal></expr></argument>,<br/></line>
<line class = "methodC">274&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<argument><expr><call><name><name>session</name><operator>.</operator><name>getEncoding</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call><br/></line>
<line class = "methodC">275&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><argument_list><argument><expr><operator>+</operator> <call><name><name>session</name><operator>.</operator><name>getWriter</name></name><argument_list>()</argument_list></call><operator>.</operator><call><name>getProblemCharacters</name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >276&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "methodC">277&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>session</name><operator>.</operator><name>commit</name></name><argument_list>()</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "catch">278&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block> <catch>catch <parameter_list>(<parameter><decl><type><name>SaveException</name></type> <name>ex</name></decl></parameter>)</parameter_list> <block>{<br/></line>
<line class = "printE">279&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>err</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"Could not save file."</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">"\n"</literal><br/></expr></argument></argument_list></call></expr></expr_stmt></line>
<line class = "methodC">280&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<operator>+</operator> <call><name><name>ex</name><operator>.</operator><name>getLocalizedMessage</name></name><argument_list>()</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >281&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></catch></try><br/></line>
<line class = "nothing"  >282<br/></line>
<line class = "Asignmt">283&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>notSavedMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >284&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >285&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >286<br/></line>
<line class = "controlS">287&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><operator>!</operator><name>notSavedMsg</name></expr>)</condition><then> <block>{<br/></line>
<line class = "print">288&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"no database generated"</literal></expr></argument>)</argument_list></call></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >289&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "controlS">290&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "Asignmt">291&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>usageMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >292&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "controlS">293&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then> <else>else <block>{<br/></line>
<line class = "Asignmt">294&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><name>usageMsg</name> <operator>=</operator> <literal type="boolean">true</literal></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >295&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></else></if><br/></line>
<line class = "nothing"  >296<br/></line>
<line class = "controlS">297&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<if>if <condition>(<expr><name>usageMsg</name></expr>)</condition><then> <block>{<br/></line>
<line class = "print">298&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"no base-BibTeX-file specified"</literal></expr></argument>)</argument_list></call><operator>+</operator><literal type="string">"!"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "print">299&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><call><name><name>Localization</name><operator>.</operator><name>lang</name></name><argument_list>(<argument><expr><literal type="string">"usage"</literal></expr></argument>)</argument_list></call> <operator>+</operator> <literal type="string">" :"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "print">300&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<expr_stmt><expr><call><name><name>System</name><operator>.</operator><name>out</name><operator>.</operator><name>println</name></name><argument_list>(<argument><expr><literal type="string">"jabref --aux infile[.aux],outfile[.bib] base-BibTeX-file"</literal></expr></argument>)</argument_list></call></expr>;</expr_stmt><br/></line>
<line class = "nothing"  >301&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >302&nbsp;&nbsp;&nbsp;}</block></then></if><br/></line>
<line class = "nothing"  >303<br/></line>
<line class = "return">304&nbsp;&nbsp;&nbsp;<return>return <expr><name>loaded</name></expr>;</return><br/></line>
<line class = "nothing"  >305}</block></function><br/></line>
</body></html>
